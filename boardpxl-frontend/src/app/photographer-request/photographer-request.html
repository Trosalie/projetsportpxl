<app-popup #popup></app-popup>
<div class="form">
    <div class="loading-overlay" *ngIf="isSending">
        <div class="spinner"></div>
        <p>Envoi en cours...</p>
    </div>
    <div class="amount-field">
        <label for="amount">{{ requestType === 'versement' ? 'Montant du chiffre d\'affaires' : 'Nombre de crédits souhaités' }}</label>
        <input 
            type="number" 
            id="amount" 
            name="amount" 
            [(ngModel)]="amount" 
            (ngModelChange)="onAmountChange()" 
            [placeholder]="requestType === 'versement' ? 'Ex: 1500' : 'Ex: 100'" 
            [disabled]="isSending"
            min="0"
            [step]="requestType === 'crédits' ? '1' : '0.01'"
        />
    </div>
    <div>
        <p class="error-message"></p>
        <textarea id="message" name="message" placeholder="{{ requestType === 'versement' ? 'Veuillez indiquer les détails de votre demande de versement.' : 'Veuillez indiquer le nombre de crédits souhaités et les raisons de cette demande.' }}" required [disabled]="isSending" readonly>{{ requestMessage }}</textarea>
    </div>
    <button type="button" (click)="submitRequest()" [disabled]="isSending">Envoyer</button>
</div>