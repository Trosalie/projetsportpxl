<div class="filter-section">
  <div class="filter-label">Filtres</div>

  <!-- Filter Buttons -->
  <div class="filter-buttons">
    <!-- Statut Button -->
    <div class="filter-dropdown-container">
      <button class="filter-button" [class.active]="hasActiveStatusFilters()" (click)="toggleDropdown('status', $event)">
        <img src="assets/price-tag_icon.png" alt="Statut" class="filter-icon">
        <span>Statut</span>
        <button *ngIf="hasActiveStatusFilters()" class="clear-category-btn" (click)="clearCategoryFilters('status', $event)">
          <img src="assets/close_icon.png" alt="Clear">
        </button>
      </button>
      <div class="dropdown-menu" *ngIf="openDropdown === 'status'" (click)="$event.stopPropagation()">
        <label class="checkbox-item" *ngFor="let status of statusFilters">
          <input 
            type="checkbox" 
            [checked]="isFilterActive(status)"
            (change)="toggleFilter(status)">
          <span>{{ status }}</span>
        </label>
      </div>
    </div>

    <!-- Type Button -->
    <div class="filter-dropdown-container">
      <button class="filter-button" [class.active]="hasActiveTypeFilters()" (click)="toggleDropdown('type', $event)">
        <img src="assets/category_icon.png" alt="Type" class="filter-icon">
        <span>Type</span>
        <button *ngIf="hasActiveTypeFilters()" class="clear-category-btn" (click)="clearCategoryFilters('type', $event)">
          <img src="assets/close_icon.png" alt="Clear">
        </button>
      </button>
      <div class="dropdown-menu" *ngIf="openDropdown === 'type'" (click)="$event.stopPropagation()">
        <label class="checkbox-item" *ngFor="let type of typeFilters">
          <input 
            type="checkbox" 
            [checked]="isFilterActive(type)"
            (change)="toggleFilter(type)">
          <span>{{ type }}</span>
        </label>
      </div>
    </div>

    <!-- Période Button -->
    <div class="filter-dropdown-container">
      <button class="filter-button" [class.active]="hasActivePeriodFilters()" (click)="toggleDropdown('period', $event)">
        <img src="assets/calendar_icon.png" alt="Période" class="filter-icon">
        <span>Période</span>
        <button *ngIf="hasActivePeriodFilters()" class="clear-category-btn" (click)="clearCategoryFilters('period', $event)">
          <img src="assets/close_icon.png" alt="Clear">
        </button>
      </button>
      <div class="dropdown-menu period-dropdown" *ngIf="openDropdown === 'period'" (click)="$event.stopPropagation()">
        <div class="date-filter-item" *ngFor="let period of periodFilters">
          <label class="checkbox-item">
            <input 
              type="checkbox" 
              [checked]="isFilterActive(period)"
              (change)="toggleFilter(period); isFilterActive(period) && addDateFilter(period)">
            <span>{{ period }}</span>
          </label>
          <input 
            *ngIf="isFilterActive(period)"
            type="date" 
            class="date-input" 
            [attr.data-filter]="period"
            [value]="getDateValue(period)" 
            (change)="updateDateFilter(period, $event)"
            [min]="period === 'Avant le' ? getDateValue('Après le') : ''"
            [max]="period === 'Après le' ? getDateValue('Avant le') : ''"
            (click)="$event.stopPropagation()">
        </div>
      </div>
    </div>
  </div>
</div>
