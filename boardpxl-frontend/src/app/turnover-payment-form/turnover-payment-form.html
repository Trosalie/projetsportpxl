<app-title [title]="('TURNOVER_PAYMENT_FORM.TITLE' | translate)"></app-title>
<app-popup #popup></app-popup>
<app-confirm-modal
  [isVisible]="showConfirmModal"
  [invoiceData]="modalData"
  (confirm)="onConfirmInvoice()"
  (discard)="onCancelInvoice()">
</app-confirm-modal>
<form class="credit-purchase-form" (submit)="onSubmit($event)">
  <div class="form-group">
    <label for="photographer">{{ 'TURNOVER_PAYMENT_FORM.LABEL_PHOTOGRAPHER' | translate }}</label>
    <input type="text" id="photographer" name="photographer" required [value]="photographerInput" (input)="onPhotographerChange($event.target.value)" [disabled]="isLoading"/>
    <div *ngIf="isLoading" class="loading-indicator">{{ 'TURNOVER_PAYMENT_FORM.LOADING_PHOTOGRAPHER' | translate }}</div>
    <ul *ngIf="filteredClients.length > 0" class="suggestions">
      <li *ngFor="let name of filteredClients" (click)="selectPhotographer(name)">
        {{ name }}
      </li>
    </ul>
  </div>
  <div class="form-group">
     <label for="CA">{{ 'TURNOVER_PAYMENT_FORM.LABEL_TURNOVER' | translate }}</label>
    <input type="text" id="CA" name="CA" maxlength="7" required/>
  </div>
  <div class="form-group">
     <label for="Subject">{{ 'TURNOVER_PAYMENT_FORM.LABEL_SUBJECT' | translate }}</label>
    <input type="text" id="Subject" name="Subject" required/>
  </div>
  <div class="form-group">
    <label for="tva">{{ 'TURNOVER_PAYMENT_FORM.LABEL_TVA' | translate }}</label>
    <select id="tva" name="tva" required>
      <option value="FR_1_05">FR_1_05</option>
      <option value="FR_1_75">FR_1_75</option>
      <option value="FR_09">FR_09</option>
      <option value="FR_21">FR_21</option>
      <option value="FR_40">FR_40</option>
      <option value="FR_50">FR_50</option>
      <option value="FR_55">FR_55</option>
      <option value="FR_60">FR_60</option>
      <option value="FR_65">FR_65</option>
      <option value="FR_85">FR_85</option>
      <option value="FR_92">FR_92</option>
      <option value="FR_100">FR_100</option>
      <option value="FR_130">FR_130</option>
      <option value="FR_15_385">FR_15_385</option>
      <option value="FR_160">FR_160</option>
      <option value="FR_196">FR_196</option>
      <option value="FR_200">FR_200</option>
    </select>
  </div>
  <div class="date-row">
    <div class="form-group">
      <label for="startDate">{{ 'TURNOVER_PAYMENT_FORM.LABEL_START_DATE' | translate }}</label>
      <input type="date" id="startDate" name="startDate" required>
    </div>

    <div class="form-group">
      <label for="endDate">{{ 'TURNOVER_PAYMENT_FORM.LABEL_END_DATE' | translate }}</label>
      <input type="date" id="endDate" name="endDate" required [value]="today">
    </div>
  </div>
  <div class="form-actions">
    <button  type="submit" [disabled]="creationFacture" [ngClass]="{'no-animation': creationFacture}">
      {{ 'TURNOVER_PAYMENT_FORM.BTN_SUBMIT' | translate }}
    </button>
  </div>
</form>
